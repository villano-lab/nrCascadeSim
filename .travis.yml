jobs:
   include:
    - os: osx
      osx_image: xcode12 
      env:  ROOTDIST="root_v6.24.06.macos-10.15-x86_64-clang120.tar.gz"; CHECKSUM="e38c561bfed333a60b093ce655cdea73"
      language: generic 
      python: 3.7
    - os: linux
      dist: xenial
      env:  ROOTDIST="root_v6.20.00.Linux-ubuntu16-x86_64-gcc5.4.tar.gz"; CHECKSUM="3a5e00bcb6ebc0e8c76f6877249dfc85"
      language: python
      python: 3.7
    - os: linux
      dist: bionic
      env:  ROOTDIST="root_v6.20.00.Linux-ubuntu18-x86_64-gcc7.4.tar.gz"; CHECKSUM="3a5e00bcb6ebc0e8c76f6877249dfc85"
      language: python
      python: 3.7
    - os: linux
      dist: xenial
      env:  ROOTDIST="root_v6.24.06.Linux-ubuntu16-x86_64-gcc5.4.tar.gz"; CHECKSUM="e38c561bfed333a60b093ce655cdea73"
      language: python
      python: 3.7
    - os: linux
      dist: bionic
      env:  ROOTDIST="root_v6.24.06.Linux-ubuntu18-x86_64-gcc7.5.tar.gz"; CHECKSUM="e38c561bfed333a60b093ce655cdea73"
      language: python
      python: 3.7
    - os: linux
      dist: focal 
      env:  ROOTDIST="root_v6.24.06.Linux-ubuntu20-x86_64-gcc9.3.tar.gz"; CHECKSUM="6119a78ef8c534b6bcdd497d796b89b9"
      language: python
      python: 3.7

# osx deps
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew list python3 &>/dev/null || brew install python3; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install pyenv-virtualenv; fi

install:
   #- sudo chmod 777 .travis/baby_install.sh
   #- ls -lh .travis/baby_install.sh
   #- source .travis/baby_install.sh

    # Install some custom requirements on Linux
    #get apt-get and conda
    - sudo apt-get update || true
    - sleep 10
    - sudo apt-get install make cmake g++ gcc binutils libx11-dev libxpm-dev libxft-dev libxext-dev openssl libssl-dev
    - sleep 10
    - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
    - bash miniconda.sh -b -p $HOME/miniconda
    - export PATH="$HOME/miniconda/bin:$PATH"
    - hash -r
    
    - conda config --set always_yes yes --set changeps1 no
    - conda update -q conda || true
      
    # Useful for debugging any issues with conda
    - conda info -a
      
    #set up  conda environment
    - conda env create -n test-environment python=$TRAVIS_PYTHON_VERSION -f nrCascadeSim_env.yml 
    - source activate test-environment
    - pip install -r example-usecase/requirements.txt
    - conda list papermill

script:
  - source activate test-environment
  - conda list papermill
